<!DOCTYPE html>
<html>
<head>
    <title>Test Packages API</title>
</head>
<body>
    <h1>Test de API de Paquetes</h1>
    <div id="results"></div>
    
    <script>
        const API_BASE_URL = 'http://localhost:8001/api/v1';
        const resultsDiv = document.getElementById('results');
        
        function showResult(message, isError = false) {
            const p = document.createElement('p');
            p.textContent = message;
            p.style.color = isError ? 'red' : 'green';
            resultsDiv.appendChild(p);
        }
        
        async function testConnection() {
            try {
                showResult('üîç Probando conexi√≥n al servidor...');
                
                // Test 1: Endpoint p√∫blico de paquetes
                const response1 = await fetch(`${API_BASE_URL}/paquetes`);
                if (response1.ok) {
                    const data1 = await response1.json();
                    showResult(`‚úÖ Endpoint p√∫blico funciona. Paquetes encontrados: ${data1.length}`);
                    console.log('Paquetes p√∫blicos:', data1);
                } else {
                    showResult(`‚ùå Error en endpoint p√∫blico: ${response1.status}`, true);
                }
                
                // Test 2: Endpoint de admin (sin autenticaci√≥n - debe dar 401)
                const response2 = await fetch(`${API_BASE_URL}/admin/paquetes`);
                if (response2.status === 401) {
                    showResult('‚úÖ Endpoint de admin funciona (401 sin auth es correcto)');
                } else {
                    showResult(`‚ùå Endpoint admin inesperado: ${response2.status}`, true);
                }
                
            } catch (error) {
                showResult(`‚ùå Error de conexi√≥n: ${error.message}`, true);
                console.error('Error:', error);
            }
        }
        
        // Ejecutar al cargar la p√°gina
        testConnection();
    </script>
</body>
</html>